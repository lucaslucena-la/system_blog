version: "3.9"

services:
  web:
    build: .
    container_name: system_blog
    ports:
      - "5000:5000"
    environment:
      - FLASK_ENV=development        # ou production
      - SECRET_KEY=${SECRET_KEY:-dev-secret-change-me}
      - EMAIL_USER=${EMAIL_USER}
      - EMAIL_PASS=${EMAIL_PASS}
      - MAIL_DEFAULT_SENDER=${MAIL_DEFAULT_SENDER}
    volumes:
      - .:/app                       # código para desenvolvimento
      - dbdata:/app/instance         # banco SQLite persiste aqui (sobrescreve a subpasta 'instance')
    # env_file:
    #   - .env   # se preferir mover variáveis para um arquivo

volumes:
  dbdata:
